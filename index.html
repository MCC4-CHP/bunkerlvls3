<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Bunker Levels — MCC4</title>

<meta name="theme-color" content="#0b2740"/>
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="apple-mobile-web-app-title" content="Bunker Levels"/>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#212121;
  --panel:#062868;
  --accent:#d8dfe9;
  --accent-2:#344c3d;
  --muted:#9fb6c6;
  --card:#1bace9;
  --ok:#8ef0c9; --warn:#ffd08a; --bad:#ff8a9a; --standby:#0b2d3a;
  --green-dark:#0b5a3f;
  --input-bg:#cfdeca;
  --toggle-blue:#2f7dff;
  --level-green: #19a85b;
  --level-orange: #ffb33a;
  --level-red: #ff6b7a;
}

html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  overflow:hidden;
  -webkit-font-smoothing:antialiased;
}

#appShell{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  box-sizing:border-box;
}

.page-wrap{
  height:100%;
  width:100%;
  max-width:420px;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:6px;
  box-sizing:border-box;
}

.container{
  width:100%;
  max-width:420px;
  padding:10px;
  box-sizing:border-box;
  background:linear-gradient(180deg,var(--panel),#062868);
  border-radius:12px;
  border:px solid rgba(255,255,255,0.06);
  box-shadow:0 10px 30px rgba(2,6,10,0.6);
  color:#e6f7f2;
  height:100%;
  display:flex;
  flex-direction:column;
  position:relative;
  padding-bottom:60px !important;
}

h2{
  margin:6px 0 15px;
  font-size:1.02rem;
  text-align:center;
  font-weight:700;
  color:#eaf8f3;
}
h2::after{
  content:"";
  display:block;
  height:3px;
  width:120px;
  margin:6px auto 0;
  border-radius:2px;
  background:linear-gradient(90deg,var(--accent),#7dd1c6,var(--accent-2));
}

.pill{
  min-width:110px;
  height:36px;
  border-radius:22px;
  background:transparent;
  color:#ccefe4;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:0 10px;
  font-weight:700;
}
.pill .label {
  font-size: 1.1rem;
  opacity: 0.9;
}
.pill .value {
  font-size: 1.2rem;
  font-weight: 700;
  letter-spacing: 0.4px;
  color: #ffffff;
}

.stack{
  height:100%;
  overflow-y:auto;
  overflow-x:hidden;
  display:flex;
  justify-content:flex-start;
}

.stack-inner{
  width:100%;
}

.unit-wrapper{
  display:flex;
  border-radius:8px;
  background:transparent;
  overflow:visible;
  align-items:stretch;
  padding:2px 0;
}

.unit-label{
  width:57px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:15px;
  padding:4px 4px;
}

.unit5-label{background:linear-gradient(180deg,#212121,#5e5e5e)}
.unit6-label{background:linear-gradient(180deg,#212121,#5e5e5e)}
.unit7-label{background:linear-gradient(180deg,#212121,#5e5e5e)}

.unit-label .title{
  font-size:0.9rem;
  font-weight:800;
  letter-spacing:0.4px;
  line-height:1.5;
}

.unit-label .badge{
  width:65px;
  height:65px;
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,0.12);
  color:#fff;
  font-weight:900;
  font-size:2.2rem;
  box-shadow:0 6px 14px rgba(0,0,0,0.2);
  margin:4px 0;
}
.unit-label .max-txt{
  font-size:0.7rem;
  font-weight:700;
  margin-top:0;
  line-height:1;
}

/* ---- ROPE/FULL toggle for U8 ---- */
.unit8-mode-toggle{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:3px;
  margin-top:2px;
}
.unit8-mode-toggle .mode-label{
  font-size:0.62rem;
  font-weight:800;
  letter-spacing:0.3px;
  color:#aad4f5;
  min-width:34px;
  text-align:center;
  line-height:1;
}
/* the pill slider */
.toggle-pill{
  position:relative;
  width:36px;
  height:18px;
  border-radius:99px;
  background:#1a3a50;
  border:1px solid rgba(255,255,255,0.15);
  cursor:pointer;
  transition:background 0.25s;
  flex-shrink:0;
}
.toggle-pill.disabled{
  opacity:0.35;
  cursor:not-allowed;
  pointer-events:none;
}
.toggle-pill.on{
  background:#e06c3a;
}
.toggle-pill .knob{
  position:absolute;
  top:2px;
  left:2px;
  width:12px;
  height:12px;
  border-radius:50%;
  background:#fff;
  transition:left 0.22s cubic-bezier(.4,0,.2,1);
  box-shadow:0 1px 4px rgba(0,0,0,0.35);
}
.toggle-pill.on .knob{
  left:20px;
}

.unit-box{
  flex:1;
  padding:4px 6px 2px;
  box-sizing:border-box;
  background:transparent;
  overflow:visible;
}

table{
  width:100%;
  border-collapse:collapse;
  border:1px solid rgba(165, 103, 103, 0.7);
  table-layout:fixed;
}
th,td{
  border:3px solid rgba(162, 162, 162, 0.1);
  padding:4px 2px;
  height:44px;
  text-align:center;
  font-weight:700;
  color:var(--muted);
  background:transparent;
  font-size:0.96rem;
}
.cell-content{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:100%;
  padding:2px;
}
.row-labels td .cell-content{
  font-size:1.2rem;
  color:#0d0d0d;
  background:#BBBCA7;
}
.row-levels td .cell-content{
  font-size:1.5rem;
}

.active-cell{
  background:var(--input-bg);
  color:#000000;
}
.standby-cell{
  background:rgba(255,255,255,0.05);
  color:#ccc;
}

.lvl-green{background:var(--level-green) !important;color:#001a09 !important}
.lvl-orange{background:var(--level-orange) !important;color:#111 !important}
.lvl-red{background:var(--level-red) !important;color:#111 !important}

.capacity-line{
  background:rgba(255,255,255,0.04);
  padding:6px;
  margin-top:6px;
  border-radius:6px;
  font-weight:800;
  text-align:left;
  color:#d7f7ee;
  display:none;
}
.summary{
  background:rgba(160, 69, 69, 0.02);
  padding:6px;
  margin-top:6px;
  border-radius:6px;
  font-weight:700;
  text-align:left;
  color:#d7f7ee;
  min-height:12px;
  max-height:12px;
  visibility:hidden;
}

.header-standby{
  background:#737370;
  box-shadow:inset 0 0 0 3px rgba(255,180,0,0.4);
  color:#41403f;
  font-weight:800;
}

input[type="text"][data-standby="1"]{
  opacity:1;
  color:#9e9e9e !important;
}

input[type="text"]{
  width:100%;
  height:100%;
  font-size:1.5rem;
  font-weight:800;
  text-align:center;
  border:none;
  background:#ffffff;
  color:#000000;
  padding:6px;
  border-radius:4px;
}
input[type="text"]:focus{
  outline:none;
  background:#ffffff;
  box-shadow:0 0 0 2px rgba(0,0,0,0.06);
}

#unit7 .row-levels td input[type="text"]{
  font-size:1.2rem;
}
#unit8 .row-levels td input[type="text"]{
  font-size:1.1rem;
}
#unit8 th, #unit8 td{
  height:36px;
  padding:2px 1px;
}

.bar{
  display:flex;
  gap:8px;
  margin-top:2px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
  padding:8px;
  background:transparent;
  position:static;
}
button{
  padding:8px 10px;
  border-radius:8px;
  border:none;
  background:var(--accent);
  color:#022;
  font-weight:800;
  cursor:pointer;
}
button.secondary{
  background:transparent;
  color:#cfeee0;
  border:1px solid rgba(255,255,255,0.04);
}
button:disabled{
  background:rgba(255,255,255,0.04);
  color:#556070;
  cursor:not-allowed;
}

.jump-toggle{
  width:36px;
  height:36px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border:1px solid rgba(0,0,0,0.08);
  background:var(--toggle-blue);
  color:#012;
  font-weight:900;
  box-shadow:0 8px 22px rgba(47,125,255,0.28);
  font-size:0.95rem;
}
.jump-toggle.disabled{
  opacity:0.45;
  background:#344c3d;
}

.alert-toggle{
  width:36px;
  height:36px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border:1px solid rgba(0,0,0,0.08);
  background:#ae7960;
  color:#130101;
  font-weight:900;
  box-shadow:0 8px 22px rgba(255,82,82,0.22);
  font-size:0.95rem;
}
.alert-toggle.active{
  background:#ae7960;
  box-shadow:0 10px 30px rgba(255,31,31,0.28);
  color:#fff;
}
.alert-toggle:focus{
  outline:none;
  box-shadow:0 10px 30px rgba(255,31,31,0.28);
}
.alert-toggle.disabled{
  opacity:0.6;
  background:#ae7960;
}

.edit-row{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}

@media (max-width:360px){
  .unit-label{width:64px;height:105px}
  .unit-label .badge{width:48px;height:48px;font-size:1.0rem}
  th,td{height:40px;font-size:0.92rem}
}

#copyBtn{
  background:#344c3d;
  color:#fff;
}
#resetBtn{
  background:#344c3d;
  color:#fff;
}

.share-toggle{
  width:36px;
  height:36px;
  border-radius:50%;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border:none;
  background:#ae7960;
  color:#fff;
  box-shadow:0 6px 14px rgba(40,167,69,0.4);
  cursor:pointer;
  transition:all 0.2s ease;
}
.share-toggle:hover{
  background:#ae7960;
  box-shadow:0 8px 18px rgba(52,199,89,0.45);
}
.share-toggle:active{
  transform:scale(0.95);
}
#shareBtn{
  order:0;
}

#qrModalOverlay{
  position:fixed;
  left:0;top:0;right:0;bottom:0;
  background:rgba(0,0,0,0.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#qrModal{
  background:linear-gradient(180deg,#05202a,#08303a);
  padding:14px;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,0.6);
  max-width:92vw;
  max-height:92vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
}
#qrModal img{
  max-width:88vw;
  max-height:64vh;
  border-radius:8px;
}
#qrModal .qr-title{
  font-weight:800;
  color:#e6f7f2;
}
#qrClose{
  padding:8px 12px;
  border-radius:8px;
  border:none;
  background:#2d042d;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}
#qrActions{
  display:flex;
  gap:8px;
}

#bottomBar{
  position:fixed;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  width:calc(100% - 30px);
  max-width:420px;
  background:rgba(68, 87, 51, 0.432);
  backdrop-filter:blur(6px);
  padding:5px;
  border-radius:30px;
  display:flex;
  flex-wrap:wrap;
  gap:0;
  z-index:99999;
}
#bottomBar button{
  flex:1;
  padding:8px 0;
  min-width:0;
  height:42px;
  border:none;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
}
#bottomBar button{
  border-radius:0;
}
#bottomBar button:first-child{
  border-radius:22px 0 0 22px;
}
#bottomBar button:last-child{
  border-radius:0 22px 22px 0;
}

.unit-group{
  padding:4px;
  border-radius:12px;
  display:flex;
  flex-direction:column;
  gap:3px;
}

.group-56{
  background:rgba(135,159,155,0.45);
  border:1px solid rgba(135,159,155,0.35);
}
.group-7{
  background:rgba(140,150,160,0.45);
  border:1px solid rgba(140,150,160,0.35);
}
.group-8{
  background:rgba(0, 120, 200, 0.28);
  border:1px solid rgba(0, 120, 200, 0.203);
}

.u8-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:4px 8px;
  cursor:pointer;
  border-radius:8px;
  background:rgba(0,120,200,0.2);
  user-select:none;
}
.u8-header .u8-title{
  font-size:0.85rem;
  font-weight:800;
  color:#d0eeff;
  letter-spacing:0.5px;
}
.u8-toggle-icon{
  font-size:1.2rem;
  font-weight:900;
  color:#d0eeff;
}
</style>
</head>
<body>
<div id="appShell">
  <div class="page-wrap">
    <div class="container" role="main">
      <h2>Dr.NTTPS – Unit Bunker Levels – MCC-4</h2>

      <div id="timestamp-container" style="display:flex;gap:8px;justify-content:center;margin-bottom:6px">
        <div class="pill">
          <span class="label">Time</span>
          <span class="value" id="timeText" contenteditable="true" tabindex="0">--:--</span>
        </div>
        <div class="pill">
          <span class="label">Date</span>
          <span class="value" id="dateText" contenteditable="true" tabindex="0">--</span>
        </div>
      </div>

      <div class="stack" id="stack">
        <div class="stack-inner">

          <!-- GROUP 1 : UNIT 5 + UNIT 6 -->
          <div class="unit-group group-56">
        
            <div class="unit-wrapper" id="wrap5">
              <div class="unit-label unit5-label">
                <div class="title">UNIT</div>
                <div class="badge">5</div>
                <div class="max-txt">Max: 15mt</div>
              </div>
              <div class="unit-box">
                <table id="unit5"></table>
                <div id="summary-unit5" class="summary"></div>
              </div>
            </div>
        
            <div class="unit-wrapper" id="wrap6">
              <div class="unit-label unit6-label">
                <div class="title">UNIT</div>
                <div class="badge">6</div>
                <div class="max-txt">Max: 15mt</div>
              </div>
              <div class="unit-box">
                <table id="unit6"></table>
                <div id="summary-unit6" class="summary"></div>
              </div>
            </div>
        
          </div>
        
          <!-- GROUP 2 : UNIT 7 -->
          <div class="unit-group group-7">
            <div class="unit-wrapper" id="wrap7">
              <div class="unit-label unit7-label">
                <div class="title">UNIT</div>
                <div class="badge">7</div>
                <div class="max-txt">Max: 17mt</div>
              </div>
              <div class="unit-box">
                <table id="unit7"></table>
                <div id="summary-unit7" class="summary"></div>
              </div>
            </div>
          </div>
          
          <!-- GROUP 3 : UNIT 8 -->
          <div class="unit-group group-8">

            <div class="u8-header" id="u8BadgeLabel">
              <span class="u8-title">UNIT 8 — Max: 25mt</span>
              <span class="u8-toggle-icon" id="u8MaxTxt">＋</span>
            </div>

            <div id="u8Content" style="display:none">
              <div class="unit-wrapper" id="wrap8">
                <div class="unit-label unit7-label">
                  <div class="title">UNIT</div>
                  <div class="badge">8</div>
                  <div class="max-txt">Max: 25mt</div>
                  <!-- ROPE / FULL toggle -->
                  <div class="unit8-mode-toggle" id="u8ModeToggleWrap">
                    <div class="mode-label" id="u8ModeLabel">REV</div>
                    <div class="toggle-pill disabled" id="u8ModePill" title="Toggle REV mode">
                      <div class="knob"></div>
                    </div>
                  </div>
                </div>
                <div class="unit-box">
                  <table id="unit8"></table>
                  <div id="summary-unit8" class="summary"></div>
                </div>
              </div>
            </div>

          </div>

        </div>
      </div>

      <!-- QR Modal -->
      <div id="qrModalOverlay" aria-hidden="true">
        <div id="qrModal" role="dialog" aria-modal="true">
          <div class="qr-title">Scan QR to copy bunker levels</div>
          <img id="qrImg" alt="QR code" src="" />
          <div id="qrActions">
            <button id="qrDownload">Download</button>
            <button id="qrClose">Close</button>
          </div>
        </div>
      </div>

      <!-- Fixed bottom bar -->
      <div id="bottomBar">
        <button id="updateBtn" disabled>UPDATE</button>
        <button id="resetBtn" class="secondary">RESET</button>
        <button id="editBtn" style="display:none" class="secondary">EDIT</button>
        <button id="alertBtn" class="secondary">LOW</button>
        <button id="pauseToggle" class="secondary">1-digit</button>
        <button id="shareBtn" class="share-toggle" title="Share snapshot">SHARE</button>
      </div>
    </div>
  </div>
</div>

<script>
/* =====================  STATE  ===================== */
let editMode = false;
let currentDate = new Date();
const jumpTimers = new Map(), lastValues = {}, lastEntered = {};
const ENTRY_LIMITS = {unit5:15, unit6:15, unit7:17, unit8:25};
const CAPACITY     = {unit5:15, unit6:15, unit7:17, unit8:25};

let alertMode   = false;
let allowJump   = true;
let pauseOnLow  = false;
let u8Visible   = false;

// ROPE=false (default) means user enters rope reading → remaining = cap - entered
// FULL=true means user enters actual bunker level directly → remaining = entered
let u8FullMode  = false;

// persistent manual standby state
const standbyState = {unit5:[], unit6:[], unit7:[], unit8:[]};

// Track which "phase" has been updated so UPDATE can stay enabled for U8 separately
// updatedPhase: 0=nothing, 1=567 updated (edit shows), 2=U8 also updated
let updatedPhase = 0;

/* =====================  HELPERS  ===================== */
function rounded15(d){
  const x=new Date(d);
  let m=Math.round(x.getMinutes()/15)*15;
  if(m===60){x.setHours(x.getHours()+1);m=0;}
  x.setMinutes(m,0,0);
  return x;
}
function fmtDate(d){return `${String(d.getDate()).padStart(2,'0')}-${String(d.getMonth()+1).padStart(2,'0')}-${d.getFullYear()}`;}
function fmtTime(d){return `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;}

/* =====================  DOM REFS  ===================== */
let timeText,dateText,updateBtn,editBtn,resetBtn,alertBtn,shareBtn;

document.addEventListener('DOMContentLoaded',()=>{
  timeText  = document.getElementById('timeText');
  dateText  = document.getElementById('dateText');
  updateBtn = document.getElementById('updateBtn');
  editBtn   = document.getElementById('editBtn');
  resetBtn  = document.getElementById('resetBtn');
  alertBtn  = document.getElementById('alertBtn');
  shareBtn  = document.getElementById('shareBtn');

  if(updateBtn) updateBtn.addEventListener('click', onUpdate);
  if(resetBtn)  resetBtn.addEventListener('click',  resetTables);
  if(editBtn)   editBtn.addEventListener('click',   enterEditMode);
  if(alertBtn){ alertBtn.type='button'; alertBtn.addEventListener('click',()=>toggleAlert()); }

  const pauseToggle = document.getElementById('pauseToggle');
  if(pauseToggle){
    pauseToggle.style.background = '#344c3d';
    pauseToggle.addEventListener('click',()=>{
      pauseOnLow = !pauseOnLow;
      pauseToggle.style.background = pauseOnLow ? '#2f7dff' : '#344c3d';
      pauseToggle.textContent = pauseOnLow ? '2-digit' : '1-digit';
      updateInputFontSizes();
    });
  }

  if(shareBtn) shareBtn.addEventListener('click',()=>{
    const orig = shareBtn.textContent;
    shareBtn.disabled = true;
    shareBtn.textContent = '*';
    sharePanelImage().finally(()=>{ shareBtn.disabled=false; shareBtn.textContent=orig; });
  });

  // QR modal
  const qrOverlay  = document.getElementById('qrModalOverlay');
  const qrClose    = document.getElementById('qrClose');
  const qrDownload = document.getElementById('qrDownload');
  qrClose.addEventListener('click',()=>{ qrOverlay.style.display='none'; qrOverlay.setAttribute('aria-hidden','true'); });
  qrOverlay.addEventListener('click',(e)=>{
    if(e.target===qrOverlay){ qrOverlay.style.display='none'; qrOverlay.setAttribute('aria-hidden','true'); }
  });
  qrDownload.addEventListener('click',()=>{
    const img=document.getElementById('qrImg');
    if(!img||!img.src) return;
    const a=document.createElement('a'); a.href=img.src; a.download='bunker-levels-qr.png';
    document.body.appendChild(a); a.click(); a.remove();
  });

  // Time/Date editable fields
  currentDate = rounded15(new Date());
  if(timeText) timeText.textContent = fmtTime(currentDate);
  if(dateText) dateText.textContent = fmtDate(currentDate);

  if(timeText){
    timeText.addEventListener('blur',()=>{
      const txt=(timeText.textContent||'').trim();
      const m=txt.match(/(\d{1,2}):(\d{2})/);
      if(m){
        currentDate.setHours(Math.max(0,Math.min(23,parseInt(m[1],10)||0)));
        currentDate.setMinutes(Math.max(0,Math.min(59,parseInt(m[2],10)||0)));
        timeText.textContent=fmtTime(currentDate);
      } else { timeText.textContent=fmtTime(currentDate); }
    });
    timeText.addEventListener('keydown',(e)=>{ if(e.key==='Enter'){e.preventDefault();timeText.blur();} });
  }
  if(dateText){
    dateText.addEventListener('blur',()=>{
      const txt=(dateText.textContent||'').trim();
      const m=txt.match(/(\d{1,2})-(\d{1,2})-(\d{4})/);
      if(m){
        currentDate.setFullYear(parseInt(m[3],10)||currentDate.getFullYear());
        currentDate.setMonth((Math.max(1,Math.min(12,parseInt(m[2],10)||1)))-1);
        currentDate.setDate(Math.max(1,Math.min(31,parseInt(m[1],10)||1)));
        dateText.textContent=fmtDate(currentDate);
      } else { dateText.textContent=fmtDate(currentDate); }
    });
    dateText.addEventListener('keydown',(e)=>{ if(e.key==='Enter'){e.preventDefault();dateText.blur();} });
  }

  // U8 expand/collapse
  const u8BadgeLabel = document.getElementById('u8BadgeLabel');
  if(u8BadgeLabel){
    u8BadgeLabel.addEventListener('click',()=>{
      u8Visible = !u8Visible;
      const u8Content = document.getElementById('u8Content');
      if(u8Content) u8Content.style.display = u8Visible ? '' : 'none';
      const u8MaxTxt = document.getElementById('u8MaxTxt');
      if(u8MaxTxt) u8MaxTxt.textContent = u8Visible ? '－' : '＋';
      // If U8 expanded and has inputs, re-check validate
      validateInputs();
    });
  }

  // U8 ROPE/FULL toggle pill
  const u8Pill = document.getElementById('u8ModePill');
  if(u8Pill){
    u8Pill.addEventListener('click',()=>{
      u8FullMode = !u8FullMode;
      u8Pill.classList.toggle('on', u8FullMode);
      reRenderU8();
    });
  }

  buildAllInputs(false);
});

/* =====================  TABLE BUILDER  ===================== */
function createInputTable(id, bunkers){
  const t = document.getElementById(id);
  t.innerHTML = '';

  const r1 = document.createElement('tr'); r1.className = 'row-labels';
  bunkers.forEach((b,idx)=>{
    const td = document.createElement('td');
    td.innerHTML = `<div class="cell-content">${b}</div>`;
    td.style.cursor = 'pointer';
    td.addEventListener('click',()=> toggleHeaderStandby(id,idx));
    r1.appendChild(td);
  });
  t.appendChild(r1);

  const r2 = document.createElement('tr'); r2.className = 'row-levels';
  bunkers.forEach((b,i)=>{
    const td = document.createElement('td');
    td.innerHTML = `<div class="cell-content"><input type="text" inputmode="numeric" maxlength="2" /></div>`;
    const input = td.querySelector('input');
    const isStandby = standbyState[id]?.includes(b);
    input.style.color = isStandby ? '#9e9e9e' : '#000000';
    input.dataset.unit   = id;
    input.dataset.bunker = b;

    td.querySelector('.cell-content').addEventListener('click',(ev)=>{
      ev.stopPropagation();
      try{ input.focus(); input.select(); }catch(e){}
    });

    if(standbyState[id] && standbyState[id].includes(b)){
      input.dataset.standby = '1';
      input.value = '';
      r1.cells[i].classList.add('header-standby');
    } else {
      input.dataset.standby = '0';
      r1.cells[i].classList.remove('header-standby');
    }

    input.addEventListener('input', ()=> handleInput(input,id,bunkers.length,i));
    input.addEventListener('keydown',(e)=> onInputKey(e,input,id,bunkers.length,i));
    input.addEventListener('focus', ()=> { try{ input.select(); }catch(e){} });
    r2.appendChild(td);
  });
  t.appendChild(r2);
}

/* =====================  STANDBY TOGGLE  ===================== */
function toggleHeaderStandby(unitId, bunkerIndex){
  const table = document.getElementById(unitId);
  if(!table || table.rows.length<1) return;
  const bunkers = Array.from(table.rows[0].cells).map(c=>(c.textContent||c.innerText||'').trim());
  const bunker  = bunkers[bunkerIndex];
  if(!bunker) return;
  const arr = standbyState[unitId] || [];
  const idx = arr.indexOf(bunker);
  if(idx>=0){ arr.splice(idx,1); } else { arr.push(bunker); }
  standbyState[unitId] = arr;

  if(table.rows.length>=2 && table.rows[1].cells[bunkerIndex].querySelector('input')){
    const input = table.rows[1].cells[bunkerIndex].querySelector('input');
    if(input){
      const isSb = arr.includes(bunker);
      input.dataset.standby = isSb ? '1' : '0';
      input.style.color = isSb ? '#9e9e9e' : '#ffffff';
    }
    if(arr.includes(bunker)){
      table.rows[0].cells[bunkerIndex].classList.add('header-standby');
      if(input) input.value='';
    } else {
      table.rows[0].cells[bunkerIndex].classList.remove('header-standby');
    }
    validateInputs();
  } else {
    const unitMeta = unitMetaById(unitId);
    const lastEnteredForUnit = unitMeta.bunkers.map(b=> lastEntered[`${unitId}-${b}`] ?? null);
    renderResultTable(unitId, unitMeta.cap, unitMeta.bunkers, lastEnteredForUnit, arr);
  }
}

/* =====================  KEY NAVIGATION  ===================== */
function onInputKey(e, input, unitId, totalCols, colIndex){
  if(e.key==='ArrowRight'){
    e.preventDefault();
    try{ if(colIndex+1<totalCols) document.getElementById(unitId).rows[1].cells[colIndex+1].querySelector('input').focus(); }catch{}
  }
  if(e.key==='ArrowLeft'){
    e.preventDefault();
    try{ if(colIndex-1>=0) document.getElementById(unitId).rows[1].cells[colIndex-1].querySelector('input').focus(); }catch{}
  }
  if(e.key==='Enter'){
    e.preventDefault();
    const v   = input.value.replace(/\D/g,'');
    const num = v ? parseInt(v,10) : null;
    const minForJump = (pauseOnLow && unitId==='unit8') ? 2 : pauseOnLow ? 1 : 0;
    if(allowJump && num!==null && num>minForJump){
      jumpToNext(unitId, totalCols, colIndex);
    }
  }
}

function jumpToNext(unitId, totalCols, colIndex){
  if(!allowJump) return;
  try{
    const row = document.getElementById(unitId).rows[1];
    if(colIndex+1 < totalCols){
      const next = row.cells[colIndex+1].querySelector('input');
      if(next){ next.focus(); return; }
    } else {
      if(unitId==='unit5')      document.querySelector('#unit6 input')?.focus();
      else if(unitId==='unit6') document.querySelector('#unit7 input')?.focus();
      else if(unitId==='unit7') document.querySelector('#unit8 input')?.focus();
      else if(unitId==='unit8') updateBtn && updateBtn.focus();
    }
  }catch(e){}
}

/* =====================  INPUT HANDLER  ===================== */
function handleInput(input, unitId, totalCols, colIndex){
  const cap = ENTRY_LIMITS[unitId];
  let v = input.value.replace(/\D/g,'');
  input.value = v;
  if(v.startsWith('0')){ input.value=''; return; }

  // In 1-digit mode, block 2 digits in ALL cells of ALL units
  if(!pauseOnLow){
    if(v.length>1){ input.value=v.slice(0,1); return; }
  }

  let num = v ? parseInt(v,10) : NaN;
  if(num > cap){ input.value=String(cap); num=cap; }

  const minForJump = pauseOnLow ? ((unitId==='unit8') ? 2 : 1) : 0;
  if(pauseOnLow && num<=minForJump){ clearTimeout(jumpTimers.get(input)); validateInputs(); return; }
  if(num>minForJump && num<=cap){ clearTimeout(jumpTimers.get(input)); jumpToNext(unitId,totalCols,colIndex); }
  validateInputs();
}

/* =====================  VALIDATE — RE-ENABLE UPDATE  ===================== */
function validateInputs(){
  const units567 = [
    {id:'unit5', cap:ENTRY_LIMITS.unit5, bunkers:['A','B','C','D','E','F'], maxEmpty:2},
    {id:'unit6', cap:ENTRY_LIMITS.unit6, bunkers:['A','B','C','D','E','F'], maxEmpty:2},
    {id:'unit7', cap:ENTRY_LIMITS.unit7, bunkers:['A','B','C','D','E','F','G'], maxEmpty:0},
  ];

  let ok567 = true;
  units567.forEach(u=>{
    const table = document.getElementById(u.id);
    if(!table || !table.rows || table.rows.length<2){ ok567=false; return; }
    let emptyCount=0;
    for(let i=0;i<u.bunkers.length;i++){
      const input = table.rows[1].cells[i].querySelector('input');
      if(!input || input.dataset.standby==='1') continue;
      const v=input.value.trim();
      const d=v?parseInt(v,10):null;
      if(!d||d<=0||d>u.cap){ emptyCount++; if(emptyCount>u.maxEmpty){ok567=false;return;} }
    }
  });

  if(!updateBtn) return;
  updateBtn.disabled = !ok567;
  updateBtn.style.visibility = 'visible';
}

/* =====================  SUMMARIES  ===================== */
function updateSummaries(){
  ['unit5','unit6','unit7','unit8'].forEach(id=>{
    const standbys = standbyState[id]||[];
    const box = document.getElementById('summary-'+id);
    if(!box) return;
    if(standbys.length){
      box.textContent='Standby Bunkers: '+standbys.join(', ');
      box.style.visibility='visible';
    } else {
      box.textContent='';
      box.style.visibility='hidden';
    }
  });
}

/* =====================  COLOR CLASS  ===================== */
function classByEntered(unitId, enteredVal, displayVal){
  if(enteredVal == null) return '';
  if(unitId==='unit8'){
    const val = (displayVal != null) ? displayVal : enteredVal;
    if(val < 15) return 'lvl-red';
    return '';
  }
  if(unitId==='unit7'){ if(enteredVal>=12&&enteredVal<=17) return 'lvl-red'; }
  if(enteredVal>=10&&enteredVal<=15) return 'lvl-red';
}

/* =====================  RENDER RESULT TABLE  ===================== */
function renderResultTable(id, cap, bunkers, entered, standby){
  const t = document.getElementById(id);
  t.innerHTML='';

  const r1 = document.createElement('tr'); r1.className='row-labels';
  bunkers.forEach((b,idx)=>{
    const td=document.createElement('td');
    td.innerHTML=`<div class="cell-content">${b}</div>`;
    td.style.cursor='pointer';
    if(standby.includes(b)) td.classList.add('header-standby');
    td.addEventListener('click',()=> toggleHeaderStandby(id,idx));
    r1.appendChild(td);
  });
  t.appendChild(r1);

  const r2 = document.createElement('tr'); r2.className='row-levels';
  bunkers.forEach((b,i)=>{
    const td=document.createElement('td');
    const key=`${id}-${b}`;
    const isManualStandby=(standby||[]).includes(b);
    const remain=lastValues[key];

    if(isManualStandby){
      td.className='standby-cell';
      td.innerHTML=`<div class="cell-content">${remain??''}</div>`;
    } else {
      // active-cell for all non-standby — empty string if no value yet (U8 not yet entered)
      td.className='active-cell';
      td.innerHTML=`<div class="cell-content">${remain??''}</div>`;
    }
    r2.appendChild(td);
  });
  t.appendChild(r2);
  updateSummaries();
}

/* =====================  UNIT META  ===================== */
function unitMetaById(id){
  const meta={
    unit5:{id:'unit5',cap:CAPACITY.unit5,bunkers:['A','B','C','D','E','F']},
    unit6:{id:'unit6',cap:CAPACITY.unit6,bunkers:['A','B','C','D','E','F']},
    unit7:{id:'unit7',cap:CAPACITY.unit7,bunkers:['A','B','C','D','E','F','G']},
    unit8:{id:'unit8',cap:CAPACITY.unit8,bunkers:['A','B','C','D','E','F','G','H']}
  };
  return meta[id];
}

/* =====================  COLLECT & RENDER  ===================== */
function collectAndRender(keepCurrentTime, unitsToProcess){
  const allUnits = [
    {id:'unit5',cap:CAPACITY.unit5,inputCap:ENTRY_LIMITS.unit5,bunkers:['A','B','C','D','E','F'],     allowEmpty:true},
    {id:'unit6',cap:CAPACITY.unit6,inputCap:ENTRY_LIMITS.unit6,bunkers:['A','B','C','D','E','F'],     allowEmpty:true},
    {id:'unit7',cap:CAPACITY.unit7,inputCap:ENTRY_LIMITS.unit7,bunkers:['A','B','C','D','E','F','G'], allowEmpty:false},
    {id:'unit8',cap:CAPACITY.unit8,inputCap:ENTRY_LIMITS.unit8,bunkers:['A','B','C','D','E','F','G','H'],allowEmpty:true}
  ];

  const units = unitsToProcess
    ? allUnits.filter(u=> unitsToProcess.includes(u.id))
    : allUnits;

  for(const u of units){
    const row=document.getElementById(u.id).rows[1];
    if(!row) return false;
    const entered=[], standby=[];
    for(let i=0;i<u.bunkers.length;i++){
      const input=row.cells[i].querySelector('input');
      const isManualStandby=input&&input.dataset&&input.dataset.standby==='1';
      const v=input.value.trim();
      const d=v?parseInt(v,10):null;
      const key=`${u.id}-${u.bunkers[i]}`;

      if(isManualStandby){
        standby.push(u.bunkers[i]); entered.push(null);
        if(!standbyState[u.id].includes(u.bunkers[i])) standbyState[u.id].push(u.bunkers[i]);
      } else if(!d||d<=0||d>u.inputCap){
        if(u.allowEmpty){
          // For U8: empty cell stays as active-cell (green) with no value — NOT pushed to standby
          if(u.id==='unit8'){
            entered.push(null);
          } else {
            standby.push(u.bunkers[i]); entered.push(null);
            if(!standbyState[u.id].includes(u.bunkers[i])) standbyState[u.id].push(u.bunkers[i]);
          }
        } else return false;
      } else {
        entered.push(d);
        lastEntered[key]=d;
        lastValues[key] = u.cap - d;  // always: remaining = cap − entered

        const idx=standbyState[u.id].indexOf(u.bunkers[i]);
        if(idx>=0) standbyState[u.id].splice(idx,1);
      }
    }
    renderResultTable(u.id, u.cap, u.bunkers, entered, standbyState[u.id]);
  }

  if(!keepCurrentTime) currentDate=rounded15(new Date());
  return true;
}

/* =====================  UPDATE BUTTON  ===================== */
function onUpdate(){
  if(!collectAndRender(false, ['unit5','unit6','unit7'])) return;
  collectAndRender(true, ['unit8']);
  document.querySelectorAll('.capacity-line').forEach(el=>el.style.display='block');
  updateBtn.disabled = true;
  updateBtn.style.visibility = 'hidden';
  if(editBtn) editBtn.style.display = '';

  // Enable REV slider only if all U8 non-standby cells have values
  const u8Pill = document.getElementById('u8ModePill');
  if(u8Pill){
    const bunkers = ['A','B','C','D','E','F','G','H'];
    const allFilled = bunkers.every(b=>{
      if((standbyState.unit8||[]).includes(b)) return true;
      return lastValues[`unit8-${b}`] != null;
    });
    u8Pill.classList.toggle('disabled', !allFilled);
  }
}

/* =====================  EDIT MODE  ===================== */
function enterEditMode(){
  buildAllInputs(true);
  if(editBtn) editBtn.style.display='none';
  if(updateBtn){ updateBtn.style.visibility='visible'; updateBtn.disabled=false; }
  // Disable REV slider while in edit mode
  const u8Pill=document.getElementById('u8ModePill');
  if(u8Pill){ u8Pill.classList.add('disabled'); u8Pill.classList.remove('on'); }
  u8FullMode=false;
  document.querySelectorAll('#unit5 input,#unit6 input,#unit7 input,#unit8 input').forEach(input=>{
    input.addEventListener('input',()=>{ if(updateBtn) updateBtn.disabled=false; });
  });
  // Focus first cell of U5 and select its value
  const firstInput = document.querySelector('#unit5 .row-levels td:first-child input');
  if(firstInput){ setTimeout(()=>{ firstInput.focus(); firstInput.select(); }, 50); }
}

/* =====================  BUILD ALL INPUTS  ===================== */
function buildAllInputs(prefill){
  createInputTable('unit5',['A','B','C','D','E','F']);
  createInputTable('unit6',['A','B','C','D','E','F']);
  createInputTable('unit7',['A','B','C','D','E','F','G']);
  createInputTable('unit8',['A','B','C','D','E','F','G','H']);

  if(prefill){
    ['unit5','unit6','unit7','unit8'].forEach(u=>{
      const letters = u==='unit8' ? ['A','B','C','D','E','F','G','H']
                    : u==='unit7' ? ['A','B','C','D','E','F','G']
                    : ['A','B','C','D','E','F'];
      const row=document.getElementById(u).rows[1];
      letters.forEach((b,i)=>{
        const key=`${u}-${b}`;
        if(lastEntered[key]!=null) row.cells[i].querySelector('input').value=String(lastEntered[key]);
        if(standbyState[u]&&standbyState[u].includes(b)) row.cells[i].querySelector('input').dataset.standby='1';
      });
    });
  } else {
    ['unit5','unit6','unit7','unit8'].forEach(u=>{
      const letters = u==='unit8' ? ['A','B','C','D','E','F','G','H']
                    : u==='unit7' ? ['A','B','C','D','E','F','G']
                    : ['A','B','C','D','E','F'];
      letters.forEach(b=>{ delete lastEntered[`${u}-${b}`]; delete lastValues[`${u}-${b}`]; });
    });
  }
  validateInputs();
  updateInputFontSizes();
}

/* =====================  RESET  ===================== */
function resetTables(){
  standbyState.unit5=[]; standbyState.unit6=[]; standbyState.unit7=[]; standbyState.unit8=[];
  currentDate=rounded15(new Date());
  if(timeText) timeText.textContent=fmtTime(currentDate);
  if(dateText) dateText.textContent=fmtDate(currentDate);
  buildAllInputs(false);
  updateSummaries();
  if(updateBtn){ updateBtn.disabled=true; updateBtn.style.visibility='visible'; }
  if(editBtn) editBtn.style.display='none';
  u8Visible=false;
  const u8Content=document.getElementById('u8Content');
  if(u8Content) u8Content.style.display='none';
  const u8MaxTxt=document.getElementById('u8MaxTxt');
  if(u8MaxTxt) u8MaxTxt.textContent='＋';
  // Reset ROPE/FULL toggle back to ROPE
  u8FullMode=false;
  const u8Pill=document.getElementById('u8ModePill');
  if(u8Pill){ u8Pill.classList.remove('on'); u8Pill.classList.add('disabled'); }
  const u8Lbl=document.getElementById('u8ModeLabel');
  if(u8Lbl){ u8Lbl.textContent='REV'; u8Lbl.style.color='#aad4f5'; u8Lbl.style.textShadow='none'; }
  document.querySelector('#unit5 input')?.focus();
}

/* =====================  FONT SIZES  ===================== */
function updateInputFontSizes(){
  const u7inputs=document.querySelectorAll('#unit7 .row-levels td input[type="text"]');
  const u8inputs=document.querySelectorAll('#unit8 .row-levels td input[type="text"]');
  u7inputs.forEach(inp=> inp.style.fontSize=pauseOnLow?'1.1rem':'1.3rem');
  u8inputs.forEach(inp=> inp.style.fontSize=pauseOnLow?'0.95rem':'1.1rem');
}

/* =====================  ALERT TOGGLE  ===================== */
function toggleAlert(){
  alertMode=!alertMode;
  if(alertBtn){
        alertBtn.classList.toggle('active', alertMode);
        alertBtn.setAttribute('aria-pressed', alertMode?'true':'false');
        alertBtn.textContent='LOW';
        alertBtn.style.background = alertMode ? '#ff6b7a' : '';
        alertBtn.style.color = alertMode ? '#111' : '';
  }
  refreshColoringFromDisplayedTables();
}

function refreshColoringFromDisplayedTables(){
  ['unit5','unit6','unit7','unit8'].forEach(id=>{
    const table=document.getElementById(id);
    if(!table||table.rows.length<2) return;
    const headRow=table.rows[0], bodyRow=table.rows[1];
    for(let i=0;i<headRow.cells.length;i++){
      const headCell=headRow.cells[i], bodyCell=bodyRow.cells[i];
      const bunker=(headCell.textContent||headCell.innerText||'').trim();
      const key=`${id}-${bunker}`;
      const hasValue=typeof lastValues[key]!=='undefined'&&lastValues[key]!==null;
      const isStandby=Array.isArray(standbyState[id])&&standbyState[id].includes(bunker);
      const displayText=hasValue?String(lastValues[key]):'';
      if(isStandby||displayText===''){
        bodyCell.className='standby-cell';
        bodyCell.innerHTML=`<div class="cell-content">${displayText}</div>`;
      } else {
        const classes=['active-cell'];
        if(alertMode){ const cc=classByEntered(id, lastEntered[key]??null, lastValues[key]??null); if(cc) classes.push(cc); }
        bodyCell.className=classes.join(' ');
        bodyCell.innerHTML=`<div class="cell-content">${displayText}</div>`;
      }
    }
  });
  updateSummaries();
}

/* =====================  REV TOGGLE RE-RENDER  ===================== */
function reRenderU8(){
  const bunkers = ['A','B','C','D','E','F','G','H'];
  const cap = CAPACITY.unit8;
  const hasData = bunkers.some(b=> lastValues[`unit8-${b}`] != null);
  if(!hasData) return;

  bunkers.forEach(b=>{
    const key = `unit8-${b}`;
    if(lastValues[key] == null) return;
    lastValues[key] = cap - lastValues[key];  // flip: 25 - current displayed value
  });

  const enteredArr = bunkers.map(b=> lastEntered[`unit8-${b}`] ?? null);
  renderResultTable('unit8', cap, bunkers, enteredArr, standbyState['unit8']);
  refreshColoringFromDisplayedTables();
}
function showQRForText(text){
  if(typeof QRious==='undefined'){ alert('QR generator library not available'); return; }
  const size=Math.min(600,Math.max(240,Math.floor(window.innerWidth*0.7)));
  const qr=new QRious({value:text,size:size});
  const dataUrl=qr.toDataURL('image/png');
  const img=document.getElementById('qrImg'); img.src=dataUrl;
  const overlay=document.getElementById('qrModalOverlay');
  overlay.style.display='flex'; overlay.setAttribute('aria-hidden','false');
}
</script>

<!-- html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<!-- QRious -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<script>
async function sharePanelImage(){
  const panel = document.querySelector('.container');
  if(!panel){ alert('Panel not found'); return; }

  const clone = panel.cloneNode(true);

  // Remove bottom bar clone artifact if present
  const barInClone = clone.querySelector('.bar');
  if(barInClone) barInClone.parentNode.removeChild(barInClone);

  // If U8 is minimised, hide the entire U8 group from snapshot
  if(!u8Visible){
    const u8GroupInClone = clone.querySelector('.group-8');
    if(u8GroupInClone) u8GroupInClone.style.display = 'none';
  } else {
    // U8 maximised: hide the header bar and REV toggle, remove group styling gaps
    const u8HeaderInClone = clone.querySelector('#u8BadgeLabel');
    if(u8HeaderInClone) u8HeaderInClone.style.display = 'none';
    const u8RevInClone = clone.querySelector('#u8ModeToggleWrap');
    if(u8RevInClone) u8RevInClone.style.display = 'none';
    // Keep group-8 border/container styling (same as U7)
    // Remove unit label gap area left by hidden badge/title
    const u8LabelInClone = clone.querySelector('#wrap8 .unit-label .title');
    if(u8LabelInClone) u8LabelInClone.style.display = 'none';
  }

  const wrapper = document.createElement('div');
  wrapper.style.cssText = 'position:fixed;left:-9999px;top:0;';
  wrapper.appendChild(clone);
  document.body.appendChild(wrapper);

  try{
    const canvas = await html2canvas(clone,{backgroundColor:null, scale:window.devicePixelRatio||2});
    const blob   = await new Promise(resolve=> canvas.toBlob(resolve,'image/png'));
    if(!blob) throw new Error('Failed to create image');
    const file = new File([blob],'bunker-levels.png',{type:'image/png'});

    if(navigator.canShare&&navigator.canShare({files:[file]})&&navigator.share){
      try{ await navigator.share({files:[file],title:'Bunker Levels',text:'MCC4 Bunker levels'}); document.body.removeChild(wrapper); return; }
      catch(err){ console.warn('Web Share failed:',err); }
    }
    if(navigator.clipboard&&navigator.clipboard.write){
      try{
        await navigator.clipboard.write([new ClipboardItem({[file.type]:blob})]);
        alert('Image copied to clipboard — paste in your chat or app');
        document.body.removeChild(wrapper); return;
      }catch(err){ console.warn('Clipboard write failed:',err); }
    }
    const url=URL.createObjectURL(blob);
    const win=window.open(url,'_blank');
    if(!win){
      const a=document.createElement('a'); a.href=url; a.download='bunker-levels.png';
      document.body.appendChild(a); a.click(); a.remove();
    }
    setTimeout(()=>URL.revokeObjectURL(url),5000);
  }catch(err){
    console.error('sharePanelImage error',err);
    alert('Failed to create image: '+(err&&err.message));
  }finally{
    if(wrapper&&wrapper.parentNode) wrapper.parentNode.removeChild(wrapper);
  }
}
</script>

<script>
/* =====================  PWA: INLINE MANIFEST  ===================== */
(function(){
  const icon192 = 'data:image/png;base64,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';
  const icon512 = 'data:image/png;base64,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';

  const manifest = {
    name: 'Bunker Levels — MCC4',
    short_name: 'Bunker Levels',
    description: 'Dr.NTTPS Unit Bunker Levels MCC-4',
    start_url: './',
    display: 'standalone',
    orientation: 'portrait',
    background_color: '#062868',
    theme_color: '#0b2740',
    icons: [
      { src: icon192, sizes: '192x192', type: 'image/png', purpose: 'any maskable' },
      { src: icon512, sizes: '512x512', type: 'image/png', purpose: 'any maskable' }
    ]
  };
  const manifestBlob = new Blob([JSON.stringify(manifest)], {type:'application/json'});
  const manifestUrl = URL.createObjectURL(manifestBlob);
  const link = document.createElement('link');
  link.rel = 'manifest'; link.href = manifestUrl;
  document.head.appendChild(link);

  // Apple touch icon
  const appleIcon = document.createElement('link');
  appleIcon.rel = 'apple-touch-icon'; appleIcon.href = icon192;
  document.head.appendChild(appleIcon);
})();

/* =====================  PWA: SERVICE WORKER (OFFLINE)  ===================== */
if('serviceWorker' in navigator){
  const swCode = `
const CACHE = 'bunker-v1';
const URLS = ['./', './index.html'];
self.addEventListener('install', e => {
  e.waitUntil(caches.open(CACHE).then(c => c.addAll(URLS)).then(() => self.skipWaiting()));
});
self.addEventListener('activate', e => {
  e.waitUntil(clients.claim());
});
self.addEventListener('fetch', e => {
  e.respondWith(
    caches.match(e.request).then(r => r || fetch(e.request).catch(() => caches.match('./')))
  );
});
`;
  const swBlob = new Blob([swCode], {type:'application/javascript'});
  const swUrl = URL.createObjectURL(swBlob);
  navigator.serviceWorker.register(swUrl, {scope: './'}).catch(e => console.warn('SW reg failed:', e));
}

/* =====================  PWA: INSTALL BANNER  ===================== */
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredPrompt = e;
  showInstallBanner();
});

function showInstallBanner(){
  if(document.getElementById('installBanner')) return;
  const banner = document.createElement('div');
  banner.id = 'installBanner';
  banner.style.cssText = `
    position:fixed;bottom:62px;left:50%;transform:translateX(-50%);
    width:calc(100% - 30px);max-width:420px;
    background:#062868;border:1px solid #1bace9;border-radius:12px;
    display:flex;align-items:center;justify-content:space-between;
    padding:10px 14px;z-index:999999;box-shadow:0 4px 20px rgba(0,0,0,0.5);
    font-family:Inter,sans-serif;
  `;
  banner.innerHTML = `
    <span style="color:#d8dfe9;font-size:0.85rem;font-weight:600;">📲 Install Bunker Levels app</span>
    <div style="display:flex;gap:8px;">
      <button id="installBtn" style="background:#1bace9;color:#000;border:none;border-radius:8px;padding:6px 14px;font-weight:800;cursor:pointer;font-size:0.85rem;">Install</button>
      <button id="installDismiss" style="background:transparent;color:#9fb6c6;border:1px solid #344c3d;border-radius:8px;padding:6px 10px;font-weight:700;cursor:pointer;font-size:0.85rem;">✕</button>
    </div>
  `;
  document.body.appendChild(banner);

  document.getElementById('installBtn').addEventListener('click', async () => {
    if(!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    deferredPrompt = null;
    banner.remove();
  });
  document.getElementById('installDismiss').addEventListener('click', () => banner.remove());
}

window.addEventListener('appinstalled', () => {
  const b = document.getElementById('installBanner');
  if(b) b.remove();
});
</script>

</body>
</html>
